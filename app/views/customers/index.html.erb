<!-- テストフォーム -->
<div class="p-3">
  <form action="http://127.0.0.1:3000/api/create" accept-charset="UTF-8" method="post">
      <!-- <input type="hidden" name="authenticity_token" value="Pws9EkUH32k_DGhz5Qom51kLx-IEbACkbFJPa3O-kW3TgacJnZfHwIyKgwDfq2rPeUXTycaUphDm9nFqpsb8FA" autocomplete="off"> -->
      <div class="row mb-3">
      <div class="col">
          <input class="form-control" placeholder="名前" type="text" name="customer[name]" id="customer_name">
      </div>
      <div class="col">
          <input class="form-control" placeholder="年齢" type="text" name="customer[age]" id="customer_age">
      </div>
      <div class="col">
          <input class="form-control" placeholder="媒体" type="text" name="customer[media]" id="customer_media">
      </div>
      <div class="col"></div>
      </div>
      <input type="submit" name="commit" value="追加" class="btn btn-primary" data-disable-with="追加">
  </form>
</div>


<!-- データのインポート -->
<div class="p-3">
  <form>
    <div class="mb-3">
      <p class="text fs-4 fw-bold">データをインポート</p>
      <input class="form-control" type="file" id="formFile">
    </div>
    <button type="submit" class="btn btn-primary">インポートする</button>
  </form>
</div>

<!-- 線 -->
<div class="p-3">
  <hr>
</div>

<!-- データの追加 -->
<div class="p-3">
  <p class="text fs-4 fw-bold">データの追加</p>

  <!-- フォームの関数 -->
  <%
    # inputタグのクラス
    def from_class(attribute)
      if @customer.errors.full_messages_for(attribute).any?
        return this_class = "form-control border border-danger"
      else
        return this_class = "form-control"
      end
    end
  %>

  <!-- 入力フォーム -->
  <%= form_with model: @customer do |form| %>
    <div class="row mb-3">
      <div class="col">
        <%= form.text_field :name, :class=>from_class("name"), :placeholder=>'名前' %>
        <% @customer.errors.full_messages_for("name").each do |msg| %>
          <p class="text-danger ps-1 mb-0"><small><%= msg %></small></p>
        <% end %>
      </div>
      <div class="col">
        <%= form.text_field :age, :class=>from_class("age"), :placeholder=>'年齢' %>
        <% @customer.errors.full_messages_for("age").each do |msg| %>
          <p class="text-danger ps-1 mb-0"><small><%= msg %></small></p>
        <% end %>
      </div>
      <div class="col">
        <%= form.text_field :media, :class=>from_class("media"), :placeholder=>'媒体' %>
        <% @customer.errors.full_messages_for("media").each do |msg| %>
          <p class="text-danger ps-1 mb-0"><small><%= msg %></small></p>
        <% end %>
      </div>
      <div class="col"></div>
    </div>
    <%= form.submit '追加', :class=>'btn btn-primary' %>
  <% end %>
</div>

<!-- 線 -->
<div class="p-3">
  <hr>
</div>

<!-- リスト -->
<div class="p-3">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">名前</th>
        <th scope="col">年齢</th>
        <th scope="col">媒体</th>
      </tr>
    </thead>
    <tbody>

      <% @customers.each do |customer| %>
        <tr>
          <th scope="row">
            <%= customer["id"] %>
          </th>
          <td>
            <%= customer["name"] %>
          </td>
          <td>
            <%= customer["age"] %>
          </td>
          <td>
            <%= customer["media"] %>
          </td>
        </tr>
        <% end %>

    </tbody>
  </table>
</div>